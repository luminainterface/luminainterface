FROM python:3.11-slim

WORKDIR /app

# Copy only the necessary files first
COPY lumina_core/ lumina_core/
COPY requirements.txt .
COPY setup.py .

# Install dependencies
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install -e .

EXPOSE 8200

CMD ["python", "-m", "lumina_core.graph_api"] 